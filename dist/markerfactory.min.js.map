{"version":3,"file":"markerfactory.min.js","sources":["../src/markerfactory.js"],"sourcesContent":[" function compact(array) {\n    var index = -1,\n        length = array ? array.length : 0,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n        var value = array[index];\n        if (value) {\n            result[resIndex++] = value;\n        }\n    }\n    return result;\n }\n\n function padHex(str_in) {\n    if (('' + str_in).length === 1) {\n        return '0' + String(str_in);\n    } else {\n        return String(str_in);\n    }\n };\n\n var defaults = {\n    h: 1,\n    s: 78, // constant saturation\n    l: 63, // constant luminance\n    a: 1\n };\n\n var getColor = function (val, range) {\n    defaults.h = Math.floor((360 / range) * val);\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + defaults.l + \"%,\" + defaults.a + \")\";\n };\n\n var getColor1 = function () {\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + (defaults.l - 30) + \"%,\" + defaults.a + \")\";\n };\n\n var parseHalf = function (foo) {\n    return parseInt(foo / 2, 10);\n };\n\n var darken = function (stringcolor, factor) {\n    var darkercolor = {};\n    if (!factor) {\n        factor = 1;\n    }\n    if (stringcolor.fillColor.indexOf('rgb') !== -1) {\n        darkercolor.r = factor * parseHalf(stringcolor.r);\n        darkercolor.g = factor * parseHalf(stringcolor.g);\n        darkercolor.b = factor * parseHalf(stringcolor.b);\n        darkercolor.fillColor = 'rgba(' + darkercolor.r + ',' + darkercolor.g + ',' + darkercolor.b + ',0.99)';\n    } else if (stringcolor.fillColor.indexOf('hsl') !== -1) {\n        darkercolor.h = stringcolor.h;\n        darkercolor.s = stringcolor.s;\n        darkercolor.l = factor * stringcolor.l - 30;\n        darkercolor.fillColor = 'hsl(' + darkercolor.h + ',' + darkercolor.s + '%,' + darkercolor.l + '%)';\n    }\n\n    return darkercolor;\n };\n\n var parseHex = function (hexstring, opacity, darkenfactor) {\n    var hexcolor = {\n        hex: hexstring\n    };\n    darkenfactor = darkenfactor || 1;\n\n    hexstring = hexstring.replace('#', '');\n    if (hexstring.length === 3) {\n        hexstring = hexstring[0] + hexstring[0] + hexstring[1] + hexstring[1] + hexstring[2] + hexstring[2];\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hexcolor.r = parseInt(darkenfactor * (parseInt(hexstring.substring(0, 2), 16)), 10);\n    hexcolor.g = parseInt(darkenfactor * (parseInt(hexstring.substring(2, 4), 16)), 10);\n    hexcolor.b = parseInt(darkenfactor * (parseInt(hexstring.substring(4, 6), 16)), 10);\n    hexcolor.a = opacity;\n    hexcolor.fillColor = 'rgba(' + hexcolor.r + ',' + hexcolor.g + ',' + hexcolor.b + ',' + hexcolor.a + ')';\n    hexcolor.strokeColor = ['rgba(' + parseHalf(hexcolor.r), parseHalf(hexcolor.g), parseHalf(hexcolor.b), hexcolor.a + ')'].join(',');\n    hexcolor.rgb = hexcolor.fillColor;\n    return hexcolor;\n };\n\n var parseHSL = function (hslstring, opacity) {\n    var hslcolor = {},\n        hslparts = compact(hslstring.split(/hsla?\\(|\\,|\\)|\\%/));\n\n    if (hslparts[3] === undefined) {\n        hslparts[3] = 1;\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hslcolor.h = parseFloat(hslparts[0], 10);\n    hslcolor.s = parseFloat(hslparts[1], 10);\n    hslcolor.l = parseFloat(hslparts[2], 10);\n    hslcolor.a = parseFloat(opacity * hslparts[3], 10);\n\n    hslcolor.fillColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + hslcolor.l + '%,' + hslcolor.a + ')';\n    hslcolor.strokeColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + parseInt(hslcolor.l / 2, 10) + '%,' + hslcolor.a + ')';\n    hslcolor.hsl = hslcolor.fillColor;\n    return hslcolor;\n };\n\n var parseRGB = function (rgbstring, opacity, darkenfactor) {\n    var rgbcolor = {},\n        rgbparts = compact(rgbstring.split(/rgba?\\(|\\,|\\)/));\n\n    darkenfactor = darkenfactor || 1;\n\n    if (rgbparts[3] === undefined) {\n        rgbparts[3] = 1;\n    }\n\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    rgbcolor.r = parseInt(darkenfactor * (parseInt(rgbparts[0], 10) % 256), 10);\n    rgbcolor.g = parseInt(darkenfactor * (parseInt(rgbparts[1], 10) % 256), 10);\n    rgbcolor.b = parseInt(darkenfactor * (parseInt(rgbparts[2], 10) % 256), 10);\n    rgbcolor.a = parseFloat(opacity * rgbparts[3], 10);\n    rgbcolor.fillColor = 'rgba(' + rgbcolor.r + ',' + rgbcolor.g + ',' + rgbcolor.b + ',' + rgbcolor.a + ')';\n    rgbcolor.strokeColor = 'rgba(' + rgbcolor.r / 2 + ',' + rgbcolor.g / 2 + ',' + rgbcolor.b / 2 + ',' + rgbcolor.a + ')';\n    rgbcolor.rgb = rgbcolor.fillColor;\n    return rgbcolor;\n };\n\n var rgbToHSL = function (r, g, b, a) {\n    r = (r % 256) / 255;\n    g = (g % 256) / 255;\n    b = (b % 256) / 255;\n    if (a === undefined) {\n        a = 1;\n    }\n    var max = Math.max(r, g, b),\n        min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max === min) {\n        h = s = 0; // achromatic\n    } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n        case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n        case g:\n            h = (b - r) / d + 2;\n            break;\n        case b:\n            h = (r - g) / d + 4;\n            break;\n        default:\n            h = 0;\n            break;\n        }\n\n        h /= 6;\n    }\n    var hsl = {\n        h: Math.round(360 * h),\n        s: Math.round(100 * s),\n        l: Math.round(100 * l),\n        a: Math.round(100 * a) / 100\n    };\n\n    hsl.fillColor = 'hsla(' + hsl.h + ',' + hsl.s + '%,' + hsl.l + '%,' + hsl.a + ')';\n\n    return hsl;\n };\n\n var hslToRGB = function (h, s, l, a, darkenfactor) {\n    var r, g, b;\n\n    darkenfactor = darkenfactor || 1;\n    h = parseFloat(h, 10) / 360;\n    s = parseFloat(s, 10) / 100;\n    l = parseFloat(l, 10) / 100;\n    if (a === undefined) {\n        a = 1;\n    }\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var hue2rgb = function (p, q, t) {\n            if (t < 0) {\n                t += 1;\n            }\n            if (t > 1) {\n                t -= 1;\n            }\n            if (t < 1 / 6) {\n                return p + (q - p) * 6 * t;\n            }\n            if (t < 1 / 2) {\n                return q;\n            }\n            if (t < 2 / 3) {\n                return p + (q - p) * (2 / 3 - t) * 6;\n            }\n            return p;\n        };\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    if (a === undefined) {\n        a = 1;\n    }\n\n    var rgb = {\n        r: Math.round(r * 255 * darkenfactor),\n        g: Math.round(g * 255 * darkenfactor),\n        b: Math.round(b * 255 * darkenfactor),\n        a: parseFloat(a, 10)\n    };\n\n    rgb.fillColor = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\n\n    return rgb;\n\n };\n\n var toDecColor = function (stringcolor) {\n    var parsedcolor = {};\n    if (!stringcolor) {\n        parsedcolor.fillColor = 'rgba(100,250,50,0.99)';\n    } else if (stringcolor.indexOf('rgb') !== -1) {\n        parsedcolor = parseRGB(stringcolor);\n    } else if (stringcolor.indexOf('hsl') !== -1) {\n        parsedcolor = parseHSL(stringcolor);\n    } else {\n        parsedcolor = parseHex(stringcolor);\n    }\n\n    return parsedcolor;\n };\n\n var IconObject = function (canvas, markerOpts) {\n    this.url = canvas.toDataURL();\n    this.fillColor = canvas.fillColor;\n    this.markerOpts = markerOpts;\n    Object.assign(this, markerOpts);\n    return this;\n };\n IconObject.prototype.toJSON = function () {\n    return {\n        url: null,\n        markerOpts: this.markerOpts\n    };\n };\n\n var createTextMarker = function (theoptions) {\n\n    var generateCanvas = function (options) {\n        var canvas = document.createElement(\"canvas\");\n        var ancho = 30,\n            alto = 40;\n        canvas.width = ancho + 18;\n        canvas.height = alto;\n        var x = canvas.width / 2,\n            y = canvas.height - 2,\n            radius = ancho / 2,\n            angulo = 0.6;\n\n        var font = \"'\" + options.font + \"'\" || 'Arial';\n        var fontsize = options.fontsize || 11;\n\n        var context = canvas.getContext(\"2d\");\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        var radius0 = 2 * radius,\n            cx = x + 0.95 * radius0,\n            cy = y + 0.45 * radius0;\n\n        var grad = context.createLinearGradient(0, 0, 0, canvas.height),\n            color0, color1;\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = 'rgba(200,200,200,0.7)';\n\n        context.beginPath();\n\n        //arco izquierdo\n        context.arc(cx - 1, cy, radius0, 9 * Math.PI / 8, -6 * Math.PI / 8, false);\n\n        // arco superior\n        context.arc(x, (y - 7) / 2, radius, angulo, Math.PI - angulo, true);\n\n        //arco derecho\n        context.arc(2 * x - cx + 1, cy, radius0, -0.95 * Math.PI / 3, -Math.PI / 8, false);\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n        context.arc(x, 0.40 * y, 2 * radius / 3, 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        // Render Label\n        //context.font = \"11pt Arial\";\n        context.font = fontsize + \"pt \" + font;\n        context.textBaseline = \"top\";\n\n        var textWidth = context.measureText(options.label);\n\n        if (textWidth.width > ancho || String(options.label).length > 3) {\n            context.rect(x - 2 - textWidth.width / 2, y - 30, x - 2 + textWidth.width / 2, y - 23);\n            context.fillStyle = '#F7F0F0';\n            context.fill();\n            context.stroke();\n        }\n\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        // centre the text.\n        context.fillText(options.label, 1 + Math.floor((canvas.width / 2) - (textWidth.width / 2)), 8);\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 0.75;\n    var markerCanvas = generateCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'textmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(48, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(24 * theoptions.scale, 40 * theoptions.scale),\n            scaledSize: new google.maps.Size(48 * theoptions.scale, 40 * theoptions.scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createClusterIcon = function (theoptions) {\n\n    var generateClusterCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.moveTo(anchorX, anchorY);\n\n        var labelvalue = parseInt(options.label);\n        if (labelvalue < 10) {\n            color1 = 'orange';\n            fontsize = 14;\n        } else if (labelvalue < 30) {\n            color1 = 'red';\n            fontsize = 15;\n        } else {\n            color1 = 'purple';\n            fontsize = 16;\n        }\n        if (labelvalue > 99) {\n            radius = radius + 3;\n            context.setLineDash([5, 5])\n            context.beginPath();\n            context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 7), 0, 2 * Math.PI, false);\n            context.fillStyle = 'transparent';\n            context.strokeStyle = color1;\n            context.lineWidth = 2;\n            context.fill();\n            context.stroke();\n        }\n\n        context.setLineDash([5, 5])\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 2), 0, 2 * Math.PI, false);\n        context.fillStyle = 'transparent';\n        context.strokeStyle = color1;\n        context.lineWidth = 2;\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.setLineDash([5, 0])\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.strokeStyle = color1;\n        context.lineWidth = 4;\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        console.log('context font', context.font);\n        context.fillStyle = '#333';\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.label);\n\n        // centre the text.\n        context.fillText(options.label, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 1;\n    var markerCanvas = generateClusterCanvas(theoptions),\n        markerOpts = {},\n        scale = theoptions.scale;\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createFatMarkerIcon = function (theoptions) {\n\n    var generateFatCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = color1;\n        context.beginPath();\n\n        context.moveTo(anchorX, anchorY);\n\n        // arco superior\n        context.arc(anchorX, 2 + (0.50 * anchorY), radius, angulo, Math.PI - angulo, true);\n\n        //punta inferior\n        context.lineTo(anchorX, anchorY);\n\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        //console.log('context font', context.font);\n        context.fillStyle = color1;\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.unicodelabel);\n\n        // centre the text.\n        context.fillText(options.unicodelabel, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n        canvas.fillColor = color0;\n        return canvas;\n\n    };\n    var scale = theoptions.scale || 1,\n        markerCanvas = generateFatCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'fatmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(21 * scale, 36 * scale),\n            scaledSize: new google.maps.Size(42 * scale, 36 * scale),\n            scale: scale\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n    return iconObj;\n };\n\n var createTransparentMarkerIcon = function (theoptions) {\n\n    var generateTransparentCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            context = canvas.getContext(\"2d\"),\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 26,\n            color0, color1;\n\n        canvas.width = 54;\n        canvas.height = 48;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        /*context.rect(1, 1, canvas.width - 2, canvas.height - 2);\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.stroke();*/\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.beginPath();\n\n        if (options.shadow) {\n\n            context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textWidth = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textWidth.width / 2));\n\n            context.shadowOffsetX = -2;\n            context.shadowOffsetY = -2;\n            context.shadowBlur = 0;\n\n            context.fillStyle = '#FFFFFF';\n            context.shadowColor = '#666666';\n\n            context.fillText(options.unicodelabel, text_x - 4, 2);\n            context.fillText(options.unicodelabel, text_x, 5);\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 4, 8);\n\n            context.strokeStyle = '#FFFFFF';\n            context.strokeText(options.unicodelabel, text_x + 4, 8);\n\n        } else {\n\n            context.font = 'normal normal normal ' + (fontsize - 3) + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textmetric = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textmetric.width / 2));\n\n            //console.debug('textmetric', textmetric);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 0;\n            context.shadowColor = '#FFFFFF';\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 1, 6);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 1;\n            context.shadowColor = '#FFFFFF';\n            context.strokeStyle = color1;\n            context.strokeText(options.unicodelabel, text_x + 1, 6);\n\n        }\n\n        canvas.fillColor = color0;\n\n        return canvas;\n\n    };\n\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateTransparentCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n    /*if (theoptions.shadow) {\n        scale = 0.9 * scale;\n    }*/\n    theoptions.type = 'transparent';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54 * scale, 48 * scale),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n\n\n\n var MarkerFactory = {\n    createTransparentMarkerIcon: createTransparentMarkerIcon,\n    createFatMarkerIcon: createFatMarkerIcon,\n    createTextMarker: createTextMarker,\n    /**\n     * Receives a color string rgb(a), hsl(a) or hex, returns its components\n     * in rgba and hsla, with optional transparency\n     * plus a darkened version (default is half of each RGB component) and a \n     *\n     * @param {string} somecolor          - A color string in  rgb(a), hsl(a) or hex format\n     * @param {Number} [opacity=1]        - Opacity to apply to the color\n     * @param {Number} [darkenfactor=1] - How much darker should the resulting color be\n     * \n     * @return     {Object}  input color parsed and modified as requested\n     */\n    parseColorString: function (somecolor, opacity, darkenfactor) {\n        var parsedcolor = {\n                original: somecolor\n            },\n            hsl, rgb;\n\n        darkenfactor = darkenfactor || 1;\n        opacity = opacity || 1;\n\n        if (somecolor.indexOf('hsl') !== -1) {\n            hsl = parseHSL(somecolor, opacity);\n            rgb = hslToRGB(hsl.h, hsl.s, hsl.l, hsl.a, darkenfactor);\n\n        } else {\n            if (somecolor.indexOf('rgb') !== -1) {\n                rgb = parseRGB(somecolor, opacity, darkenfactor);\n            } else {\n                rgb = parseHex(somecolor, opacity, darkenfactor);\n            }\n\n\n        }\n\n\n        hsl = rgbToHSL(rgb.r, rgb.g, rgb.b, rgb.a);\n\n\n        parsedcolor.hsl = {\n            h: hsl.h,\n            s: hsl.s,\n            l: hsl.l,\n            a: hsl.a\n        };\n        parsedcolor.rgb = {\n            r: rgb.r,\n            g: rgb.g,\n            b: rgb.b,\n            a: rgb.a\n        };\n\n\n\n        parsedcolor.fillColor = rgb.fillColor;\n        parsedcolor.rgba = rgb.fillColor;\n        parsedcolor.hsla = hsl.fillColor;\n        parsedcolor.strokeColor = rgb.strokeColor;\n        parsedcolor.hex = ['#', padHex(rgb.r.toString(16)), padHex(rgb.g.toString(16)), padHex(rgb.b.toString(16))].join('');\n        return parsedcolor;\n    },\n    /**\n     * Generates an google maps marker (or an image as dataurl from the given options)\n     *\n     * @param      {Object}  options  The options\n     * @return     {Object}  { description_of_the_return_value }\n     */\n    autoIcon: function (options) {\n\n        if (typeof (options) !== 'object') {\n            console.warn('autoIcon expects an object as its only parameter');\n            return null;\n        }\n\n        options.label = String(options.label || 'A');\n        options.color = options.color || '#FF0000';\n\n        // unless explicitly set to false, the icon doesn't have a marker-like wrapper\n        if (options.transparent_background === undefined) {\n            options.transparent_background = true;\n        }\n\n        if (options.label.length === 4 || options.label.substring(0, 2) === '0x') {\n\n\n            options.font = options.font || 'fontello';\n            options.label = (options.label || 'e836').slice(-4);\n            options.unicodelabel = String.fromCharCode('0x' + options.label);\n            options.scale = options.scale || 1;\n\n            if (options.transparent_background) {\n                console.log('createTransparentMarkerIcon', options.font);\n                return MarkerFactory.createTransparentMarkerIcon(options);\n            } else {\n                console.log('createFatMarkerIcon', options.font);\n                return MarkerFactory.createFatMarkerIcon(options);\n            }\n        } else if (options.shadow) {\n            return createClusterIcon(options);\n        } else {\n            options.scale = options.scale || 0.75;\n            options.label = String(options.label || 'A');\n            options.fontsize = options.fontsize || 11;\n            options.font = options.font || 'Arial';\n            // This is text I should print literally\n            return MarkerFactory.createTextMarker(options);\n        }\n\n    }\n };\n\n\n export {\n    MarkerFactory\n };\n export default MarkerFactory;"],"names":["compact","array","index","length","resIndex","result","value","padHex","str_in","String","defaults","h","s","l","a","getColor","val","range","Math","floor","getColor1","parseHalf","foo","parseInt","darken","stringcolor","factor","darkercolor","fillColor","indexOf","r","g","b","parseHex","hexstring","opacity","darkenfactor","hexcolor","hex","replace","isNaN","parseFloat","substring","strokeColor","join","rgb","parseHSL","hslstring","hslcolor","hslparts","split","undefined","hsl","parseRGB","rgbstring","rgbcolor","rgbparts","toDecColor","parsedcolor","IconObject","canvas","markerOpts","this","url","toDataURL","Object","assign","prototype","toJSON","MarkerFactory","createTransparentMarkerIcon","theoptions","scale","fontsize","markerCanvas","options","color0","color1","document","createElement","context","getContext","font","width","height","clearRect","count","deccolor","color","beginPath","shadow","textBaseline","textWidth","measureText","unicodelabel","text_x","shadowOffsetX","shadowOffsetY","shadowBlur","fillStyle","shadowColor","fillText","strokeStyle","strokeText","textmetric","generateTransparentCanvas","type","window","google","maps","size","Size","origin","Point","anchor","scaledSize","createFatMarkerIcon","grad","createLinearGradient","anchorX","anchorY","addColorStop","moveTo","arc","PI","lineTo","fill","stroke","generateFatCanvas","createTextMarker","ancho","x","y","cx","cy","label","rect","generateCanvas","parseColorString","somecolor","original","hue2rgb","p","q","t","round","hslToRGB","max","min","d","rgbToHSL","rgba","hsla","toString","autoIcon","console","warn","transparent_background","slice","fromCharCode","log","radius","labelvalue","setLineDash","lineWidth","generateClusterCanvas","createClusterIcon"],"mappings":"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"}