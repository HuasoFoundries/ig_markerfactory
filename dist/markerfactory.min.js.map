{"version":3,"file":"markerfactory.min.js","sources":["../src/markerfactory.js"],"sourcesContent":[" function compact(array) {\n    var index = -1,\n        length = array ? array.length : 0,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n        var value = array[index];\n        if (value) {\n            result[resIndex++] = value;\n        }\n    }\n    return result;\n }\n\n var defaults = {\n    h: 1,\n    s: 78, // constant saturation\n    l: 63, // constant luminance\n    a: 1\n };\n\n var getColor = function (val, range) {\n    defaults.h = Math.floor((360 / range) * val);\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + defaults.l + \"%,\" + defaults.a + \")\";\n };\n\n var getColor1 = function () {\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + (defaults.l - 30) + \"%,\" + defaults.a + \")\";\n };\n\n var parseHalf = function (foo) {\n    return parseInt(foo / 2, 10);\n };\n\n var darken = function (stringcolor, factor) {\n    var darkercolor = {};\n    if (!factor) {\n        factor = 1;\n    }\n    if (stringcolor.fillColor.indexOf('rgb') !== -1) {\n        darkercolor.r = factor * parseHalf(stringcolor.r);\n        darkercolor.g = factor * parseHalf(stringcolor.g);\n        darkercolor.b = factor * parseHalf(stringcolor.b);\n        darkercolor.fillColor = 'rgba(' + darkercolor.r + ',' + darkercolor.g + ',' + darkercolor.b + ',0.99)';\n    } else if (stringcolor.fillColor.indexOf('hsl') !== -1) {\n        darkercolor.h = stringcolor.h;\n        darkercolor.s = stringcolor.s;\n        darkercolor.l = factor * stringcolor.l - 30;\n        darkercolor.fillColor = 'hsl(' + darkercolor.h + ',' + darkercolor.s + '%,' + darkercolor.l + '%)';\n    }\n\n    return darkercolor;\n };\n\n var parseHex = function (hexstring, opacity) {\n    var hexcolor = {\n        hex: hexstring\n    };\n\n    hexstring = hexstring.replace('#', '');\n    if (hexstring.length === 3) {\n        hexstring = hexstring[0] + hexstring[0] + hexstring[1] + hexstring[1] + hexstring[2] + hexstring[2];\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hexcolor.r = parseInt(hexstring.substring(0, 2), 16);\n    hexcolor.g = parseInt(hexstring.substring(2, 4), 16);\n    hexcolor.b = parseInt(hexstring.substring(4, 6), 16);\n    hexcolor.a = opacity;\n    hexcolor.fillColor = 'rgba(' + hexcolor.r + ',' + hexcolor.g + ',' + hexcolor.b + ',' + hexcolor.a + ')';\n    hexcolor.strokeColor = ['rgba(' + parseHalf(hexcolor.r), parseHalf(hexcolor.g), parseHalf(hexcolor.b), hexcolor.a + ')'].join(',');\n    hexcolor.rgb = hexcolor.fillColor;\n    return hexcolor;\n };\n\n var parseHSL = function (hslstring, opacity) {\n    var hslcolor = {},\n        hslparts = compact(hslstring.split(/hsla?\\(|\\,|\\)|\\%/));\n\n    if (hslparts[3] === undefined) {\n        hslparts[3] = 1;\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hslcolor.h = parseFloat(hslparts[0], 10);\n    hslcolor.s = parseFloat(hslparts[1], 10);\n    hslcolor.l = parseFloat(hslparts[2], 10);\n    hslcolor.a = parseFloat(opacity * hslparts[3], 10);\n\n    hslcolor.fillColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + hslcolor.l + '%,' + hslcolor.a + ')';\n    hslcolor.strokeColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + parseInt(hslcolor.l / 2, 10) + '%,' + hslcolor.a + ')';\n    hslcolor.hsl = hslcolor.fillColor;\n    return hslcolor;\n };\n\n var parseRGB = function (rgbstring, opacity) {\n    var rgbcolor = {},\n        rgbparts = compact(rgbstring.split(/rgba?\\(|\\,|\\)/));\n\n    if (rgbparts[3] === undefined) {\n        rgbparts[3] = 1;\n    }\n\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    rgbcolor.r = parseInt(rgbparts[0], 10) % 256;\n    rgbcolor.g = parseInt(rgbparts[1], 10) % 256;\n    rgbcolor.b = parseInt(rgbparts[2], 10) % 256;\n    rgbcolor.a = parseFloat(opacity * rgbparts[3], 10);\n    rgbcolor.fillColor = 'rgba(' + rgbcolor.r + ',' + rgbcolor.g + ',' + rgbcolor.b + ',' + rgbcolor.a + ')';\n    rgbcolor.strokeColor = 'rgba(' + rgbcolor.r / 2 + ',' + rgbcolor.g / 2 + ',' + rgbcolor.b / 2 + ',' + rgbcolor.a + ')';\n    rgbcolor.rgb = rgbcolor.fillColor;\n    return rgbcolor;\n };\n\n var rgbToHSL = function (r, g, b, a) {\n    r = (r % 256) / 255;\n    g = (g % 256) / 255;\n    b = (b % 256) / 255;\n    if (a === undefined) {\n        a = 1;\n    }\n    var max = Math.max(r, g, b),\n        min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max === min) {\n        h = s = 0; // achromatic\n    } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n        case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n        case g:\n            h = (b - r) / d + 2;\n            break;\n        case b:\n            h = (r - g) / d + 4;\n            break;\n        default:\n            h = 0;\n            break;\n        }\n\n        h /= 6;\n    }\n    var hsl = {\n        h: Math.round(360 * h),\n        s: Math.round(100 * s),\n        l: Math.round(100 * l),\n        a: Math.round(100 * a) / 100\n    };\n\n    hsl.fillColor = 'hsla(' + hsl.h + ',' + hsl.s + '%,' + hsl.l + '%,' + hsl.a + ')';\n\n    return hsl;\n };\n\n var hslToRGB = function (h, s, l, a) {\n    var r, g, b;\n\n    h = parseFloat(h, 10) / 360;\n    s = parseFloat(s, 10) / 100;\n    l = parseFloat(l, 10) / 100;\n    if (a === undefined) {\n        a = 1;\n    }\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var hue2rgb = function (p, q, t) {\n            if (t < 0) {\n                t += 1;\n            }\n            if (t > 1) {\n                t -= 1;\n            }\n            if (t < 1 / 6) {\n                return p + (q - p) * 6 * t;\n            }\n            if (t < 1 / 2) {\n                return q;\n            }\n            if (t < 2 / 3) {\n                return p + (q - p) * (2 / 3 - t) * 6;\n            }\n            return p;\n        };\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    if (a === undefined) {\n        a = 1;\n    }\n\n    var rgb = {\n        r: Math.round(r * 255),\n        g: Math.round(g * 255),\n        b: Math.round(b * 255),\n        a: parseFloat(a, 10)\n    };\n\n    rgb.fillColor = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\n\n    return rgb;\n\n };\n\n var toDecColor = function (stringcolor) {\n    var parsedcolor = {};\n    if (!stringcolor) {\n        parsedcolor.fillColor = 'rgba(100,250,50,0.99)';\n    } else if (stringcolor.indexOf('rgb') !== -1) {\n        parsedcolor = parseRGB(stringcolor);\n    } else if (stringcolor.indexOf('hsl') !== -1) {\n        parsedcolor = parseHSL(stringcolor);\n    } else {\n        parsedcolor = parseHex(stringcolor);\n    }\n\n    return parsedcolor;\n };\n\n var IconObject = function (canvas, markerOpts) {\n    this.url = canvas.toDataURL();\n    this.fillColor = canvas.fillColor;\n    this.markerOpts = markerOpts;\n    Object.assign(this, markerOpts);\n    return this;\n };\n IconObject.prototype.toJSON = function () {\n    return {\n        url: null,\n        markerOpts: this.markerOpts\n    };\n };\n\n var createTextMarker = function (theoptions) {\n\n    var generateCanvas = function (options) {\n        var canvas = document.createElement(\"canvas\");\n        var ancho = 30,\n            alto = 40;\n        canvas.width = ancho + 18;\n        canvas.height = alto;\n        var x = canvas.width / 2,\n            y = canvas.height - 2,\n            radius = ancho / 2,\n            angulo = 0.6;\n\n        var font = \"'\" + options.font + \"'\" || 'Arial';\n        var fontsize = options.fontsize || 11;\n\n        var context = canvas.getContext(\"2d\");\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        var radius0 = 2 * radius,\n            cx = x + 0.95 * radius0,\n            cy = y + 0.45 * radius0;\n\n        var grad = context.createLinearGradient(0, 0, 0, canvas.height),\n            color0, color1;\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = 'rgba(200,200,200,0.7)';\n\n        context.beginPath();\n\n        //arco izquierdo\n        context.arc(cx - 1, cy, radius0, 9 * Math.PI / 8, -6 * Math.PI / 8, false);\n\n        // arco superior\n        context.arc(x, (y - 7) / 2, radius, angulo, Math.PI - angulo, true);\n\n        //arco derecho\n        context.arc(2 * x - cx + 1, cy, radius0, -0.95 * Math.PI / 3, -Math.PI / 8, false);\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n        context.arc(x, 0.40 * y, 2 * radius / 3, 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        // Render Label\n        //context.font = \"11pt Arial\";\n        context.font = fontsize + \"pt \" + font;\n        context.textBaseline = \"top\";\n\n        var textWidth = context.measureText(options.label);\n\n        if (textWidth.width > ancho || String(options.label).length > 3) {\n            context.rect(x - 2 - textWidth.width / 2, y - 30, x - 2 + textWidth.width / 2, y - 23);\n            context.fillStyle = '#F7F0F0';\n            context.fill();\n            context.stroke();\n        }\n\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        // centre the text.\n        context.fillText(options.label, 1 + Math.floor((canvas.width / 2) - (textWidth.width / 2)), 8);\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 0.75;\n    var markerCanvas = generateCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'textmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(48, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(24 * theoptions.scale, 40 * theoptions.scale),\n            scaledSize: new google.maps.Size(48 * theoptions.scale, 40 * theoptions.scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createClusterIcon = function (theoptions) {\n\n    var generateClusterCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.moveTo(anchorX, anchorY);\n\n        var labelvalue = parseInt(options.label);\n        if (labelvalue < 10) {\n            color1 = 'orange';\n            fontsize = 14;\n        } else if (labelvalue < 30) {\n            color1 = 'red';\n            fontsize = 15;\n        } else {\n            color1 = 'purple';\n            fontsize = 16;\n        }\n        if (labelvalue > 99) {\n            radius = radius + 3;\n            context.setLineDash([5, 5])\n            context.beginPath();\n            context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 7), 0, 2 * Math.PI, false);\n            context.fillStyle = 'transparent';\n            context.strokeStyle = color1;\n            context.lineWidth = 2;\n            context.fill();\n            context.stroke();\n        }\n\n        context.setLineDash([5, 5])\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 2), 0, 2 * Math.PI, false);\n        context.fillStyle = 'transparent';\n        context.strokeStyle = color1;\n        context.lineWidth = 2;\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.setLineDash([5, 0])\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.strokeStyle = color1;\n        context.lineWidth = 4;\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        console.log('context font', context.font);\n        context.fillStyle = '#333';\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.label);\n\n        // centre the text.\n        context.fillText(options.label, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 1;\n    var markerCanvas = generateClusterCanvas(theoptions),\n        markerOpts = {},\n        scale = theoptions.scale;\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createFatMarkerIcon = function (theoptions) {\n\n    var generateFatCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = color1;\n        context.beginPath();\n\n        context.moveTo(anchorX, anchorY);\n\n        // arco superior\n        context.arc(anchorX, 2 + (0.50 * anchorY), radius, angulo, Math.PI - angulo, true);\n\n        //punta inferior\n        context.lineTo(anchorX, anchorY);\n\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        //console.log('context font', context.font);\n        context.fillStyle = color1;\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.unicodelabel);\n\n        // centre the text.\n        context.fillText(options.unicodelabel, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n        canvas.fillColor = color0;\n        return canvas;\n\n    };\n    var scale = theoptions.scale || 1,\n        markerCanvas = generateFatCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'fatmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(21 * scale, 36 * scale),\n            scaledSize: new google.maps.Size(42 * scale, 36 * scale),\n            scale: scale\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n    return iconObj;\n };\n\n var createTransparentMarkerIcon = function (theoptions) {\n\n    var generateTransparentCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            context = canvas.getContext(\"2d\"),\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 26,\n            color0, color1;\n\n        canvas.width = 54;\n        canvas.height = 48;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        /*context.rect(1, 1, canvas.width - 2, canvas.height - 2);\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.stroke();*/\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.beginPath();\n\n        if (options.shadow) {\n\n            context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textWidth = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textWidth.width / 2));\n\n            context.shadowOffsetX = -2;\n            context.shadowOffsetY = -2;\n            context.shadowBlur = 0;\n\n            context.fillStyle = '#FFFFFF';\n            context.shadowColor = '#666666';\n\n            context.fillText(options.unicodelabel, text_x - 4, 2);\n            context.fillText(options.unicodelabel, text_x, 5);\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 4, 8);\n\n            context.strokeStyle = '#FFFFFF';\n            context.strokeText(options.unicodelabel, text_x + 4, 8);\n\n        } else {\n\n            context.font = 'normal normal normal ' + (fontsize - 3) + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textmetric = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textmetric.width / 2));\n\n            //console.debug('textmetric', textmetric);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 0;\n            context.shadowColor = '#FFFFFF';\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 1, 6);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 1;\n            context.shadowColor = '#FFFFFF';\n            context.strokeStyle = color1;\n            context.strokeText(options.unicodelabel, text_x + 1, 6);\n\n        }\n\n        canvas.fillColor = color0;\n\n        return canvas;\n\n    };\n\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateTransparentCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n    /*if (theoptions.shadow) {\n        scale = 0.9 * scale;\n    }*/\n    theoptions.type = 'transparent';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54 * scale, 48 * scale),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n function parseColorString(somecolor, opacity) {\n    var parsedcolor = {\n            original: somecolor\n        },\n        hsl, rgb;\n\n    opacity = opacity || 1;\n\n    if (somecolor.indexOf('hsl') !== -1) {\n        hsl = parseHSL(somecolor, opacity);\n        rgb = hslToRGB(hsl.h, hsl.s, hsl.l, hsl.a);\n\n    } else {\n        if (somecolor.indexOf('rgb') !== -1) {\n            rgb = parseRGB(somecolor, opacity);\n        } else {\n            rgb = parseHex(somecolor, opacity);\n        }\n        hsl = rgbToHSL(rgb.r, rgb.g, rgb.b, rgb.a);\n\n    }\n\n    parsedcolor.hsl = {\n        h: hsl.h,\n        s: hsl.s,\n        l: hsl.l,\n        a: hsl.a\n    };\n    parsedcolor.rgb = {\n        r: rgb.r,\n        g: rgb.g,\n        b: rgb.b,\n        a: rgb.a\n    };\n\n    parsedcolor.fillColor = rgb.fillColor;\n    parsedcolor.strokeColor = rgb.strokeColor;\n    parsedcolor.hex = ['#', rgb.r.toString(16), rgb.g.toString(16), rgb.b.toString(16)].join('');\n    return parsedcolor;\n };\n\n var getHexColor = function (color) {\n    var hexcolor = color;\n    if (color.indexOf('rgb') !== -1) {\n        var rgbArr = color.split(/[\\(,\\)]/ig);\n        hexcolor = [\n            (1 * rgbArr[1]).toString(16), (1 * rgbArr[2]).toString(16), (1 * rgbArr[3]).toString(16)\n        ].join('');\n    } else if (color.indexOf('#') !== -1) {\n        hexcolor = color.replace(/#/g, '');\n    }\n    return hexcolor;\n };\n\n var MarkerFactory = {\n    parseColorString: parseColorString,\n    getHexColor: getHexColor,\n    createTransparentMarkerIcon: createTransparentMarkerIcon,\n    createFatMarkerIcon: createFatMarkerIcon,\n    createTextMarker: createTextMarker,\n    createClusterIcon: createClusterIcon,\n    autoIcon: function (options) {\n\n        if (typeof (options) !== 'object') {\n            console.warn('autoIcon expects an object as its only parameter');\n            return null;\n        }\n\n        options.label = String(options.label || 'A');\n        options.color = options.color || '#FF0000';\n        options.hexcolor = MarkerFactory.getHexColor(options.color);\n\n        // unless explicitly set to false, the icon doesn't have a marker-like wrapper\n        if (options.transparent_background === undefined) {\n            options.transparent_background = true;\n        }\n\n        if (options.label.length === 4 || options.label.substring(0, 2) === '0x') {\n\n\n            options.font = options.font || 'fontello';\n            options.label = (options.label || 'e836').slice(-4);\n            options.unicodelabel = String.fromCharCode('0x' + options.label);\n            options.scale = options.scale || 1;\n\n            if (options.transparent_background) {\n                console.log('createTransparentMarkerIcon', options.font);\n                return MarkerFactory.createTransparentMarkerIcon(options);\n            } else {\n                console.log('createFatMarkerIcon', options.font);\n                return MarkerFactory.createFatMarkerIcon(options);\n            }\n        } else if (options.shadow) {\n            return MarkerFactory.createClusterIcon(options);\n        } else {\n            options.scale = options.scale || 0.75;\n            options.label = String(options.label || 'A');\n            options.fontsize = options.fontsize || 11;\n            options.font = options.font || 'Arial';\n            // This is text I should print literally\n            return MarkerFactory.createTextMarker(options);\n        }\n\n    }\n };\n\n\n export {\n    MarkerFactory\n };\n export default MarkerFactory;"],"names":["compact","array","index","length","resIndex","result","value","defaults","h","s","l","a","getColor","val","range","Math","floor","getColor1","parseHalf","foo","parseInt","darken","stringcolor","factor","darkercolor","fillColor","indexOf","r","g","b","parseHex","hexstring","opacity","hexcolor","hex","replace","isNaN","parseFloat","substring","strokeColor","join","rgb","parseHSL","hslstring","hslcolor","hslparts","split","undefined","hsl","parseRGB","rgbstring","rgbcolor","rgbparts","rgbToHSL","max","min","d","round","hslToRGB","hue2rgb","p","q","t","toDecColor","parsedcolor","IconObject","canvas","markerOpts","this","url","toDataURL","Object","assign","prototype","toJSON","MarkerFactory","parseColorString","somecolor","original","toString","getHexColor","color","rgbArr","createTransparentMarkerIcon","theoptions","scale","fontsize","markerCanvas","options","color0","color1","document","createElement","context","getContext","font","width","height","clearRect","count","deccolor","beginPath","shadow","textBaseline","textWidth","measureText","unicodelabel","text_x","shadowOffsetX","shadowOffsetY","shadowBlur","fillStyle","shadowColor","fillText","strokeStyle","strokeText","textmetric","generateTransparentCanvas","type","window","google","maps","size","Size","origin","Point","anchor","scaledSize","createFatMarkerIcon","grad","createLinearGradient","anchorX","anchorY","addColorStop","moveTo","arc","PI","lineTo","fill","stroke","generateFatCanvas","createTextMarker","ancho","x","y","cx","cy","label","String","rect","generateCanvas","createClusterIcon","radius","labelvalue","setLineDash","lineWidth","console","log","generateClusterCanvas","autoIcon","warn","transparent_background","slice","fromCharCode"],"mappings":"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"}