{"version":3,"file":"markerfactory.min.js","sources":["../src/markerfactory.js"],"sourcesContent":[" function compact(array) {\n    var index = -1,\n        length = array ? array.length : 0,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n        var value = array[index];\n        if (value) {\n            result[resIndex++] = value;\n        }\n    }\n    return result;\n }\n\n function padHex(str_in) {\n    if (('' + str_in).length === 1) {\n        return '0' + String(str_in);\n    } else {\n        return String(str_in);\n    }\n };\n\n var defaults = {\n    h: 1,\n    s: 78, // constant saturation\n    l: 63, // constant luminance\n    a: 1\n };\n\n var getColor = function (val, range) {\n    defaults.h = Math.floor((360 / range) * val);\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + defaults.l + \"%,\" + defaults.a + \")\";\n };\n\n var getColor1 = function () {\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + (defaults.l - 30) + \"%,\" + defaults.a + \")\";\n };\n\n var parseHalf = function (foo) {\n    return parseInt(foo / 2, 10);\n };\n\n var darken = function (stringcolor, factor) {\n    var darkercolor = {};\n    if (!factor) {\n        factor = 1;\n    }\n    if (stringcolor.fillColor.indexOf('rgb') !== -1) {\n        darkercolor.r = factor * parseHalf(stringcolor.r);\n        darkercolor.g = factor * parseHalf(stringcolor.g);\n        darkercolor.b = factor * parseHalf(stringcolor.b);\n        darkercolor.fillColor = 'rgba(' + darkercolor.r + ',' + darkercolor.g + ',' + darkercolor.b + ',0.99)';\n    } else if (stringcolor.fillColor.indexOf('hsl') !== -1) {\n        darkercolor.h = stringcolor.h;\n        darkercolor.s = stringcolor.s;\n        darkercolor.l = factor * stringcolor.l - 30;\n        darkercolor.fillColor = 'hsl(' + darkercolor.h + ',' + darkercolor.s + '%,' + darkercolor.l + '%)';\n    }\n\n    return darkercolor;\n };\n\n var parseHex = function (hexstring, opacity) {\n    var hexcolor = {\n        hex: hexstring\n    };\n\n    hexstring = hexstring.replace('#', '');\n    if (hexstring.length === 3) {\n        hexstring = hexstring[0] + hexstring[0] + hexstring[1] + hexstring[1] + hexstring[2] + hexstring[2];\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hexcolor.r = parseInt(hexstring.substring(0, 2), 16);\n    hexcolor.g = parseInt(hexstring.substring(2, 4), 16);\n    hexcolor.b = parseInt(hexstring.substring(4, 6), 16);\n    hexcolor.a = opacity;\n    hexcolor.fillColor = 'rgba(' + hexcolor.r + ',' + hexcolor.g + ',' + hexcolor.b + ',' + hexcolor.a + ')';\n    hexcolor.strokeColor = ['rgba(' + parseHalf(hexcolor.r), parseHalf(hexcolor.g), parseHalf(hexcolor.b), hexcolor.a + ')'].join(',');\n    hexcolor.rgb = hexcolor.fillColor;\n    return hexcolor;\n };\n\n var parseHSL = function (hslstring, opacity) {\n    var hslcolor = {},\n        hslparts = compact(hslstring.split(/hsla?\\(|\\,|\\)|\\%/));\n\n    if (hslparts[3] === undefined) {\n        hslparts[3] = 1;\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hslcolor.h = parseFloat(hslparts[0], 10);\n    hslcolor.s = parseFloat(hslparts[1], 10);\n    hslcolor.l = parseFloat(hslparts[2], 10);\n    hslcolor.a = parseFloat(opacity * hslparts[3], 10);\n\n    hslcolor.fillColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + hslcolor.l + '%,' + hslcolor.a + ')';\n    hslcolor.strokeColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + parseInt(hslcolor.l / 2, 10) + '%,' + hslcolor.a + ')';\n    hslcolor.hsl = hslcolor.fillColor;\n    return hslcolor;\n };\n\n var parseRGB = function (rgbstring, opacity) {\n    var rgbcolor = {},\n        rgbparts = compact(rgbstring.split(/rgba?\\(|\\,|\\)/));\n\n    if (rgbparts[3] === undefined) {\n        rgbparts[3] = 1;\n    }\n\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    rgbcolor.r = parseInt(rgbparts[0], 10) % 256;\n    rgbcolor.g = parseInt(rgbparts[1], 10) % 256;\n    rgbcolor.b = parseInt(rgbparts[2], 10) % 256;\n    rgbcolor.a = parseFloat(opacity * rgbparts[3], 10);\n    rgbcolor.fillColor = 'rgba(' + rgbcolor.r + ',' + rgbcolor.g + ',' + rgbcolor.b + ',' + rgbcolor.a + ')';\n    rgbcolor.strokeColor = 'rgba(' + rgbcolor.r / 2 + ',' + rgbcolor.g / 2 + ',' + rgbcolor.b / 2 + ',' + rgbcolor.a + ')';\n    rgbcolor.rgb = rgbcolor.fillColor;\n    return rgbcolor;\n };\n\n var rgbToHSL = function (r, g, b, a) {\n    r = (r % 256) / 255;\n    g = (g % 256) / 255;\n    b = (b % 256) / 255;\n    if (a === undefined) {\n        a = 1;\n    }\n    var max = Math.max(r, g, b),\n        min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max === min) {\n        h = s = 0; // achromatic\n    } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n        case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n        case g:\n            h = (b - r) / d + 2;\n            break;\n        case b:\n            h = (r - g) / d + 4;\n            break;\n        default:\n            h = 0;\n            break;\n        }\n\n        h /= 6;\n    }\n    var hsl = {\n        h: Math.round(360 * h),\n        s: Math.round(100 * s),\n        l: Math.round(100 * l),\n        a: Math.round(100 * a) / 100\n    };\n\n    hsl.fillColor = 'hsla(' + hsl.h + ',' + hsl.s + '%,' + hsl.l + '%,' + hsl.a + ')';\n\n    return hsl;\n };\n\n var hslToRGB = function (h, s, l, a) {\n    var r, g, b;\n\n    h = parseFloat(h, 10) / 360;\n    s = parseFloat(s, 10) / 100;\n    l = parseFloat(l, 10) / 100;\n    if (a === undefined) {\n        a = 1;\n    }\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var hue2rgb = function (p, q, t) {\n            if (t < 0) {\n                t += 1;\n            }\n            if (t > 1) {\n                t -= 1;\n            }\n            if (t < 1 / 6) {\n                return p + (q - p) * 6 * t;\n            }\n            if (t < 1 / 2) {\n                return q;\n            }\n            if (t < 2 / 3) {\n                return p + (q - p) * (2 / 3 - t) * 6;\n            }\n            return p;\n        };\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    if (a === undefined) {\n        a = 1;\n    }\n\n    var rgb = {\n        r: Math.round(r * 255),\n        g: Math.round(g * 255),\n        b: Math.round(b * 255),\n        a: parseFloat(a, 10)\n    };\n\n    rgb.fillColor = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\n\n    return rgb;\n\n };\n\n var toDecColor = function (stringcolor) {\n    var parsedcolor = {};\n    if (!stringcolor) {\n        parsedcolor.fillColor = 'rgba(100,250,50,0.99)';\n    } else if (stringcolor.indexOf('rgb') !== -1) {\n        parsedcolor = parseRGB(stringcolor);\n    } else if (stringcolor.indexOf('hsl') !== -1) {\n        parsedcolor = parseHSL(stringcolor);\n    } else {\n        parsedcolor = parseHex(stringcolor);\n    }\n\n    return parsedcolor;\n };\n\n var IconObject = function (canvas, markerOpts) {\n    this.url = canvas.toDataURL();\n    this.fillColor = canvas.fillColor;\n    this.markerOpts = markerOpts;\n    Object.assign(this, markerOpts);\n    return this;\n };\n IconObject.prototype.toJSON = function () {\n    return {\n        url: null,\n        markerOpts: this.markerOpts\n    };\n };\n\n var createTextMarker = function (theoptions) {\n\n    var generateCanvas = function (options) {\n        var canvas = document.createElement(\"canvas\");\n        var ancho = 30,\n            alto = 40;\n        canvas.width = ancho + 18;\n        canvas.height = alto;\n        var x = canvas.width / 2,\n            y = canvas.height - 2,\n            radius = ancho / 2,\n            angulo = 0.6;\n\n        var font = \"'\" + options.font + \"'\" || 'Arial';\n        var fontsize = options.fontsize || 11;\n\n        var context = canvas.getContext(\"2d\");\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        var radius0 = 2 * radius,\n            cx = x + 0.95 * radius0,\n            cy = y + 0.45 * radius0;\n\n        var grad = context.createLinearGradient(0, 0, 0, canvas.height),\n            color0, color1;\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = 'rgba(200,200,200,0.7)';\n\n        context.beginPath();\n\n        //arco izquierdo\n        context.arc(cx - 1, cy, radius0, 9 * Math.PI / 8, -6 * Math.PI / 8, false);\n\n        // arco superior\n        context.arc(x, (y - 7) / 2, radius, angulo, Math.PI - angulo, true);\n\n        //arco derecho\n        context.arc(2 * x - cx + 1, cy, radius0, -0.95 * Math.PI / 3, -Math.PI / 8, false);\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n        context.arc(x, 0.40 * y, 2 * radius / 3, 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        // Render Label\n        //context.font = \"11pt Arial\";\n        context.font = fontsize + \"pt \" + font;\n        context.textBaseline = \"top\";\n\n        var textWidth = context.measureText(options.label);\n\n        if (textWidth.width > ancho || String(options.label).length > 3) {\n            context.rect(x - 2 - textWidth.width / 2, y - 30, x - 2 + textWidth.width / 2, y - 23);\n            context.fillStyle = '#F7F0F0';\n            context.fill();\n            context.stroke();\n        }\n\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        // centre the text.\n        context.fillText(options.label, 1 + Math.floor((canvas.width / 2) - (textWidth.width / 2)), 8);\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 0.75;\n    var markerCanvas = generateCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'textmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(48, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(24 * theoptions.scale, 40 * theoptions.scale),\n            scaledSize: new google.maps.Size(48 * theoptions.scale, 40 * theoptions.scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createClusterIcon = function (theoptions) {\n\n    var generateClusterCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.moveTo(anchorX, anchorY);\n\n        var labelvalue = parseInt(options.label);\n        if (labelvalue < 10) {\n            color1 = 'orange';\n            fontsize = 14;\n        } else if (labelvalue < 30) {\n            color1 = 'red';\n            fontsize = 15;\n        } else {\n            color1 = 'purple';\n            fontsize = 16;\n        }\n        if (labelvalue > 99) {\n            radius = radius + 3;\n            context.setLineDash([5, 5])\n            context.beginPath();\n            context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 7), 0, 2 * Math.PI, false);\n            context.fillStyle = 'transparent';\n            context.strokeStyle = color1;\n            context.lineWidth = 2;\n            context.fill();\n            context.stroke();\n        }\n\n        context.setLineDash([5, 5])\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 2), 0, 2 * Math.PI, false);\n        context.fillStyle = 'transparent';\n        context.strokeStyle = color1;\n        context.lineWidth = 2;\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.setLineDash([5, 0])\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.strokeStyle = color1;\n        context.lineWidth = 4;\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        console.log('context font', context.font);\n        context.fillStyle = '#333';\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.label);\n\n        // centre the text.\n        context.fillText(options.label, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 1;\n    var markerCanvas = generateClusterCanvas(theoptions),\n        markerOpts = {},\n        scale = theoptions.scale;\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createFatMarkerIcon = function (theoptions) {\n\n    var generateFatCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = color1;\n        context.beginPath();\n\n        context.moveTo(anchorX, anchorY);\n\n        // arco superior\n        context.arc(anchorX, 2 + (0.50 * anchorY), radius, angulo, Math.PI - angulo, true);\n\n        //punta inferior\n        context.lineTo(anchorX, anchorY);\n\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        //console.log('context font', context.font);\n        context.fillStyle = color1;\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.unicodelabel);\n\n        // centre the text.\n        context.fillText(options.unicodelabel, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n        canvas.fillColor = color0;\n        return canvas;\n\n    };\n    var scale = theoptions.scale || 1,\n        markerCanvas = generateFatCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'fatmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(21 * scale, 36 * scale),\n            scaledSize: new google.maps.Size(42 * scale, 36 * scale),\n            scale: scale\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n    return iconObj;\n };\n\n var createTransparentMarkerIcon = function (theoptions) {\n\n    var generateTransparentCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            context = canvas.getContext(\"2d\"),\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 26,\n            color0, color1;\n\n        canvas.width = 54;\n        canvas.height = 48;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        /*context.rect(1, 1, canvas.width - 2, canvas.height - 2);\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.stroke();*/\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.beginPath();\n\n        if (options.shadow) {\n\n            context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textWidth = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textWidth.width / 2));\n\n            context.shadowOffsetX = -2;\n            context.shadowOffsetY = -2;\n            context.shadowBlur = 0;\n\n            context.fillStyle = '#FFFFFF';\n            context.shadowColor = '#666666';\n\n            context.fillText(options.unicodelabel, text_x - 4, 2);\n            context.fillText(options.unicodelabel, text_x, 5);\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 4, 8);\n\n            context.strokeStyle = '#FFFFFF';\n            context.strokeText(options.unicodelabel, text_x + 4, 8);\n\n        } else {\n\n            context.font = 'normal normal normal ' + (fontsize - 3) + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textmetric = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textmetric.width / 2));\n\n            //console.debug('textmetric', textmetric);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 0;\n            context.shadowColor = '#FFFFFF';\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 1, 6);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 1;\n            context.shadowColor = '#FFFFFF';\n            context.strokeStyle = color1;\n            context.strokeText(options.unicodelabel, text_x + 1, 6);\n\n        }\n\n        canvas.fillColor = color0;\n\n        return canvas;\n\n    };\n\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateTransparentCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n    /*if (theoptions.shadow) {\n        scale = 0.9 * scale;\n    }*/\n    theoptions.type = 'transparent';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54 * scale, 48 * scale),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n\n\n\n var MarkerFactory = {\n\n    /**\n     * Receives a color string rgb(a), hsl(a) or hex, returns its components\n     * in rgba and hsla, with optional transparency\n     * plus a darkened version (default is half of each RGB component) and a \n     *\n     * @param {string} somecolor          - A color string in  rgb(a), hsl(a) or hex format\n     * @param {Number} [opacity=1]        - Opacity to apply to the color\n     * @param {Number} [darkenfactor=1] - How much darker should the resulting color be\n     * \n     * @return     {Object}  input color parsed and modified as requested\n     */\n    parseColorString: function (somecolor, opacity, darkenfactor) {\n        var parsedcolor = {\n                original: somecolor\n            },\n            hsl, rgb;\n\n        darkenfactor = darkenfactor || 1;\n        opacity = opacity || 1;\n\n        if (somecolor.indexOf('hsl') !== -1) {\n            hsl = parseHSL(somecolor, opacity);\n            rgb = hslToRGB(hsl.h, hsl.s, hsl.l, hsl.a);\n\n        } else {\n            if (somecolor.indexOf('rgb') !== -1) {\n                rgb = parseRGB(somecolor, opacity);\n            } else {\n                rgb = parseHex(somecolor, opacity);\n            }\n\n\n        }\n\n        rgb.r = rgb.r * darkenfactor;\n        rgb.g = rgb.g * darkenfactor;\n        rgb.b = rgb.b * darkenfactor;\n\n        hsl = rgbToHSL(rgb.r, rgb.g, rgb.b, rgb.a);\n\n\n        parsedcolor.hsl = {\n            h: hsl.h,\n            s: hsl.s,\n            l: hsl.l,\n            a: hsl.a\n        };\n        parsedcolor.rgb = {\n            r: rgb.r,\n            g: rgb.g,\n            b: rgb.b,\n            a: rgb.a\n        };\n\n\n\n        parsedcolor.fillColor = rgb.fillColor;\n        parsedcolor.rgba = rgb.fillColor;\n        parsedcolor.hsla = hsl.fillColor;\n        parsedcolor.strokeColor = rgb.strokeColor;\n        parsedcolor.hex = ['#', padHex(rgb.r.toString(16)), padHex(rgb.g.toString(16)), padHex(rgb.b.toString(16))].join('');\n        return parsedcolor;\n    },\n    /**\n     * Generates an google maps marker (or an image as dataurl from the given options)\n     *\n     * @param      {Object}  options  The options\n     * @return     {Object}  { description_of_the_return_value }\n     */\n    autoIcon: function (options) {\n\n        if (typeof (options) !== 'object') {\n            console.warn('autoIcon expects an object as its only parameter');\n            return null;\n        }\n\n        options.label = String(options.label || 'A');\n        options.color = options.color || '#FF0000';\n\n        // unless explicitly set to false, the icon doesn't have a marker-like wrapper\n        if (options.transparent_background === undefined) {\n            options.transparent_background = true;\n        }\n\n        if (options.label.length === 4 || options.label.substring(0, 2) === '0x') {\n\n\n            options.font = options.font || 'fontello';\n            options.label = (options.label || 'e836').slice(-4);\n            options.unicodelabel = String.fromCharCode('0x' + options.label);\n            options.scale = options.scale || 1;\n\n            if (options.transparent_background) {\n                console.log('createTransparentMarkerIcon', options.font);\n                return createTransparentMarkerIcon(options);\n            } else {\n                console.log('createFatMarkerIcon', options.font);\n                return createFatMarkerIcon(options);\n            }\n        } else if (options.shadow) {\n            return createClusterIcon(options);\n        } else {\n            options.scale = options.scale || 0.75;\n            options.label = String(options.label || 'A');\n            options.fontsize = options.fontsize || 11;\n            options.font = options.font || 'Arial';\n            // This is text I should print literally\n            return createTextMarker(options);\n        }\n\n    }\n };\n\n\n export {\n    MarkerFactory\n };\n export default MarkerFactory;"],"names":["compact","array","index","length","resIndex","result","value","padHex","str_in","String","defaults","h","s","l","a","getColor","val","range","Math","floor","getColor1","parseHalf","foo","parseInt","darken","stringcolor","factor","darkercolor","fillColor","indexOf","r","g","b","parseHex","hexstring","opacity","hexcolor","hex","replace","isNaN","parseFloat","substring","strokeColor","join","rgb","parseHSL","hslstring","hslcolor","hslparts","split","undefined","hsl","parseRGB","rgbstring","rgbcolor","rgbparts","toDecColor","parsedcolor","IconObject","canvas","markerOpts","this","url","toDataURL","Object","assign","prototype","toJSON","MarkerFactory","parseColorString","somecolor","darkenfactor","original","hue2rgb","p","q","t","round","hslToRGB","max","min","d","rgbToHSL","rgba","hsla","toString","autoIcon","options","console","warn","label","color","transparent_background","font","slice","unicodelabel","fromCharCode","scale","log","theoptions","fontsize","markerCanvas","color0","color1","document","createElement","context","getContext","width","height","clearRect","count","deccolor","beginPath","shadow","textBaseline","textWidth","measureText","text_x","shadowOffsetX","shadowOffsetY","shadowBlur","fillStyle","shadowColor","fillText","strokeStyle","strokeText","textmetric","generateTransparentCanvas","type","window","google","maps","size","Size","origin","Point","anchor","scaledSize","createTransparentMarkerIcon","grad","createLinearGradient","anchorX","anchorY","addColorStop","moveTo","arc","PI","lineTo","fill","stroke","generateFatCanvas","createFatMarkerIcon","radius","labelvalue","setLineDash","lineWidth","generateClusterCanvas","createClusterIcon","ancho","x","y","cx","cy","rect","generateCanvas","createTextMarker"],"mappings":"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"}